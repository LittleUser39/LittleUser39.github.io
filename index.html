<div class="left-bigbox">
  <!-- 기존 고정 셀렉트 박스 -->
  <div class="option-row">
    <label for="gear-lv">장비 레벨</label>
    <select id="gear-lv" name="gear-lv" onchange="resetplaceholder()">
      <option id="lv85" value="lv85" selected>Lv85</option>
      <option id="lv88" value="lv88">Lv88</option>
      <option id="lv90r" value="lv90r">Lv90 재련</option>
    </select>
  </div>

  <div class="option-row">
    <label for="gear-type">장비 종류</label>
    <select id="gear-type" name="gear-type" onchange="resetplaceholder()">
      <option id="gpurple" value="gpurple" style="color:HOTPINK; font-weight: bold;" selected>영웅</option>
      <option id="gred" value="gred" style="color:RED; font-weight: bold;">전설</option>
    </select>
  </div>

  <div class="option-row">
    <label for="gear-enc-lv">강화 구간</label>
    <select id="gear-enc-lv" onchange="resetplaceholder()" name="gear-enc-lv">
      <option id="g0" value="gear-lv0" selected>+0+1+2</option>
      <option id="g3" value="gear-lv3">+3+4+5</option>
      <option id="g6" value="gear-lv6">+6+7+8</option>
      <option id="g9" value="gear-lv9">+9+10+11</option>
      <option id="g12" value="gear-lv12">+12+13+14</option>
      <option id="g15" value="gear-lv15">+15</option>
    </select>
  </div>

  <!-- 새로 추가: 스탯 선택 영역 -->
  <div class="option-row">
    <label for="stat-selects">스탯 선택 (최대 4개)</label>
    <!-- 9개 스탯 중 최대4개 선택할 셀렉트 박스 4개 -->
    <select class="stat-select" onchange="updateStatInputs()" >
      <option value="">--선택--</option>
      <option value="atkper">공격력%</option>
      <option value="defper">방어력%</option>
      <option value="hpper">생명력%</option>
      <option value="atkflat">공격력 (고정)</option>
      <option value="defflat">방어력 (고정)</option>
      <option value="hpflat">생명력 (고정)</option>
      <option value="critch">치명확률</option>
      <option value="critdmg">치명피해</option>
      <option value="spd">속도</option>
      <option value="eff">효과적중</option>
      <option value="res">효과저항</option>
    </select>
    <select class="stat-select" onchange="updateStatInputs()">
      <option value="">--선택--</option>
      <option value="atkper">공격력%</option>
      <option value="defper">방어력%</option>
      <option value="hpper">생명력%</option>
      <option value="atkflat">공격력 (고정)</option>
      <option value="defflat">방어력 (고정)</option>
      <option value="hpflat">생명력 (고정)</option>
      <option value="critch">치명확률</option>
      <option value="critdmg">치명피해</option>
      <option value="spd">속도</option>
      <option value="eff">효과적중</option>
      <option value="res">효과저항</option>
    </select>
    <select class="stat-select" onchange="updateStatInputs()">
      <option value="">--선택--</option>
      <option value="atkper">공격력%</option>
      <option value="defper">방어력%</option>
      <option value="hpper">생명력%</option>
      <option value="atkflat">공격력 (고정)</option>
      <option value="defflat">방어력 (고정)</option>
      <option value="hpflat">생명력 (고정)</option>
      <option value="critch">치명확률</option>
      <option value="critdmg">치명피해</option>
      <option value="spd">속도</option>
      <option value="eff">효과적중</option>
      <option value="res">효과저항</option>
    </select>
    <select class="stat-select" onchange="updateStatInputs()">
      <option value="">--선택--</option>
      <option value="atkper">공격력%</option>
      <option value="defper">방어력%</option>
      <option value="hpper">생명력%</option>
      <option value="atkflat">공격력 (고정)</option>
      <option value="defflat">방어력 (고정)</option>
      <option value="hpflat">생명력 (고정)</option>
      <option value="critch">치명확률</option>
      <option value="critdmg">치명피해</option>
      <option value="spd">속도</option>
      <option value="eff">효과적중</option>
      <option value="res">효과저항</option>
    </select>
  </div>

  <!-- 스탯 입력칸들이 동적으로 생성될 영역 -->
  <div id="dynamic-stat-inputs" style="margin-top: 12px;"></div>
</div>

<script>
  // 스탯명 : 입력창 기본 속성들 (min, max, placeholder)
  const statInfo = {
    atkper: {label:"공격력%", min:0, max:48},
    defper: {label:"방어력%", min:0, max:48},
    hpper: {label:"생명력%", min:0, max:48},
    atkflat: {label:"공격력 (고정)", min:0, max:282},
    defflat: {label:"방어력 (고정)", min:0, max:198},
    hpflat: {label:"생명력 (고정)", min:0, max:1200},
    critch: {label:"치명확률", min:0, max:48},
    critdmg: {label:"치명피해", min:0, max:48},
    spd: {label:"속도", min:0, max:24},
    eff: {label:"효과적중", min:0, max:48},
    res: {label:"효과저항", min:0, max:48}
  };

  function updateStatInputs() {
    const selects = document.querySelectorAll('.stat-select');
    const dynamicDiv = document.getElementById('dynamic-stat-inputs');
    dynamicDiv.innerHTML = ''; // 초기화

    // 중복 스탯 선택 방지용 셋
    let chosen = new Set();

    selects.forEach(select => {
      const val = select.value;
      if (val && !chosen.has(val)) {
        chosen.add(val);
        const info = statInfo[val];
        if (!info) return; // 잘못된 값 무시

        // 입력칸 div 생성
        const div = document.createElement('div');
        div.className = 'option-row';

        // 라벨
        const label = document.createElement('label');
        label.htmlFor = val;
        label.innerText = info.label;
        div.appendChild(label);

        // 입력칸
        const input = document.createElement('input');
        input.type = 'number';
        input.id = val;
        input.min = info.min;
        input.max = info.max;
        input.placeholder = `0 ~ ${info.max}`;
        div.appendChild(input);

        dynamicDiv.appendChild(div);
      }
    });
  }

  // 초기 로드 시 입력칸 생성
  document.addEventListener('DOMContentLoaded', updateStatInputs);
</script>
